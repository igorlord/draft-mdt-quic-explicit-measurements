<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Application of Explicit Measurement Techniques for QUIC</title>
<meta content="Alexandre Ferrieux" name="author">
<meta content="Igor Lubashev" name="author">
<meta content="Giuseppe Fioccola" name="author">
<meta content="
       This document defines an extension to the QUIC transport protocol to allow
endpoints to signal packet loss in a way that can be used by network devices to
measure and locate the source of the loss. 
       Discussion of this work is encouraged to happen on the QUIC IETF mailing list
 quic@ietf.org  or on the GitHub repository which contains the draft:
 https://github.com/igorlord/draft-mdt-quic-explicit-measurements . 
    " name="description">
<meta content="xml2rfc 3.17.5" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-mdt-quic-explicit-measurements-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.17.5
    Python 3.11.4
    ConfigArgParse 1.5.3
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.3
    platformdirs 3.10.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.31.0
    setuptools 67.7.2
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="draft-mdt-quic-explicit-measurements.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">explicit-measurements</td>
<td class="right">August 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Ferrieux, et al.</td>
<td class="center">Expires 17 February 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-mdt-quic-explicit-measurements-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-08-16" class="published">16 August 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-02-17">17 February 2024</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Ferrieux, <span class="editor">Ed.</span>
</div>
<div class="org">Orange Labs</div>
</div>
<div class="author">
      <div class="author-name">I. Lubashev, <span class="editor">Ed.</span>
</div>
<div class="org">Akamai Technologies</div>
</div>
<div class="author">
      <div class="author-name">G. Fioccola, <span class="editor">Ed.</span>
</div>
<div class="org">Huawei Technologies</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Application of Explicit Measurement Techniques for QUIC</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines an extension to the QUIC transport protocol to allow
endpoints to signal packet loss in a way that can be used by network devices to
measure and locate the source of the loss.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">Discussion of this work is encouraged to happen on the QUIC IETF mailing list
<a href="mailto:quic@ietf.org">quic@ietf.org</a> or on the GitHub repository which contains the draft:
<a href="https://github.com/igorlord/draft-mdt-quic-explicit-measurements">https://github.com/igorlord/draft-mdt-quic-explicit-measurements</a>.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-discussion-venues">
<a href="#name-discussion-venues" class="section-name selfRef">Discussion Venues</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this document takes place on the
    QUIC Working Group mailing list (quic@ietf.org),
    which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/quic/">https://mailarchive.ietf.org/arch/browse/quic/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Source for this draft and an issue tracker can be found at
    <span><a href="https://github.com/igorlord/draft-mdt-quic-explicit-measurements">https://github.com/igorlord/draft-mdt-quic-explicit-measurements</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 17 February 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-motivation-for-passive-on-p" class="internal xref">Motivation for Passive On-Path Loss Observation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="auto internal xref">1.2</a>.  <a href="#name-on-path-loss-observation" class="internal xref">On-Path Loss Observation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="auto internal xref">1.3</a>.  <a href="#name-on-path-loss-signaling-in-q" class="internal xref">On-Path Loss Signaling in QUIC v1</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="auto internal xref">1.4</a>.  <a href="#name-recommended-use-of-the-sign" class="internal xref">Recommended Use of the Signals</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-notational-conventions" class="internal xref">Notational Conventions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-loss-bits" class="internal xref">Loss Bits</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-setting-the-square-signal-b" class="internal xref">Setting the sQuare Signal Bit on Outgoing Packets</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="auto internal xref">3.1.1</a>.  <a href="#name-q-run-length-selection" class="internal xref">Q Run Length Selection</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-setting-the-loss-event-bit-" class="internal xref">Setting the Loss Event Bit on Outgoing Packets</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-using-loss-bits-for-passive" class="internal xref">Using Loss Bits for Passive Loss Measurement</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-end-to-end-loss" class="internal xref">End-To-End Loss</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-upstream-loss" class="internal xref">Upstream Loss</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-correlating-end-to-end-and-" class="internal xref">Correlating End-to-End and Upstream Loss</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-downstream-loss" class="internal xref">Downstream Loss</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.  <a href="#name-observer-loss" class="internal xref">Observer Loss</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-quic-v1-implementation" class="internal xref">QUIC v1 Implementation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-transport-parameter" class="internal xref">Transport Parameter</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-short-packet-header" class="internal xref">Short Packet Header</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-header-protection" class="internal xref">Header Protection</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-ossification-considerations" class="internal xref">Ossification Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-optimistic-ack-attack" class="internal xref">Optimistic ACK Attack</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-privacy-considerations" class="internal xref">Privacy Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-change-log" class="internal xref">Change Log</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-since-version-02" class="internal xref">Since version 02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-since-version-01" class="internal xref">Since version 01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.  <a href="#name-since-version-00" class="internal xref">Since version 00</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="auto internal xref">12.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="auto internal xref">12.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<div id="motivation-for-passive-on-path-loss-observation">
<section id="section-1.1">
        <h3 id="name-motivation-for-passive-on-p">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-motivation-for-passive-on-p" class="section-name selfRef">Motivation for Passive On-Path Loss Observation</a>
        </h3>
<p id="section-1.1-1">Packet loss is a hard and pervasive problem of day-to-day network operation.
Proactively detecting, measuring, and locating it is crucial to maintaining high
QoS and timely resolution of crippling end-to-end throughput issues. To this
effect, in a TCP-dominated world, network operators have been heavily relying on
information present in the clear in TCP headers: sequence and acknowledgment
numbers, and SACK when enabled.  These allow for quantitative estimation of
packet loss by passive on-path observation. Additionally, the lossy segment
(upstream or downstream from the observation point) can be quickly identified by
moving the passive observer around.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">With QUIC, the equivalent transport headers are encrypted and passive packet
loss observation is not possible, as described in <span>[<a href="#RFC9065" class="cite xref">RFC9065</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">Measuring TCP loss between similar endpoints cannot be relied upon to
evaluate QUIC loss. QUIC could be routed by the network differently and
the fraction of Internet traffic delivered using QUIC is increasing every
year.  It is imperative to measure packet loss experienced by QUIC users
directly.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="on-path-loss-observation">
<section id="section-1.2">
        <h3 id="name-on-path-loss-observation">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-on-path-loss-observation" class="section-name selfRef">On-Path Loss Observation</a>
        </h3>
<p id="section-1.2-1">There are three sources of loss that network operators need to observe
to guarantee high QoS:<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.2-2.1">
            <em>upstream loss</em> - loss between the sender and the observation point
(<a href="#upstreamloss" class="auto internal xref">Section 4.2</a>)<a href="#section-1.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-2.2">
            <em>downstream loss</em> - loss between the observation point and the destination
(<a href="#downstreamloss" class="auto internal xref">Section 4.4</a>)<a href="#section-1.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.2-2.3">
            <em>observer loss</em> - loss by the observer itself that does not cause downstream
loss (<a href="#observerloss" class="auto internal xref">Section 4.5</a>)<a href="#section-1.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-1.2-3">The upstream and downstream loss together constitute <em>end-to-end loss</em>
(<a href="#endtoendloss" class="auto internal xref">Section 4.1</a>).<a href="#section-1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="on-path-loss-signaling-in-quic-v1">
<section id="section-1.3">
        <h3 id="name-on-path-loss-signaling-in-q">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-on-path-loss-signaling-in-q" class="section-name selfRef">On-Path Loss Signaling in QUIC v1</a>
        </h3>
<p id="section-1.3-1"><span>[<a href="#LOSSBITS" class="cite xref">LOSSBITS</a>]</span> presents the generic technique. Two explicit loss bits in the clear
portion of QUIC v1 short headers are used to signal packet loss to on-path
network devices. The explicit loss bits are the "sQuare signal" bit (Q) and the
"Loss event" bit (L) (see <a href="#squarebit" class="auto internal xref">Section 3.1</a> and <a href="#lossbit" class="auto internal xref">Section 3.2</a>) . This approach follows
the recommendations of <span>[<a href="#RFC8558" class="cite xref">RFC8558</a>]</span> that recommends explicit path signals.  The
current document adapts the technique proposed in <span>[<a href="#LOSSBITS" class="cite xref">LOSSBITS</a>]</span> for QUIC by using
reserved bits in QUIC v1 short header.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.3-2">While the exploitation of only Q can help in measuring the <em>upstream loss</em> and
only L can help in measuring the <em>end-to-end loss</em>, both are required to detect
and measure the other types of losses (<em>downstream loss</em> and <em>observer loss</em>).<a href="#section-1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="recommended-use-of-the-signals">
<section id="section-1.4">
        <h3 id="name-recommended-use-of-the-sign">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-recommended-use-of-the-sign" class="section-name selfRef">Recommended Use of the Signals</a>
        </h3>
<p id="section-1.4-1">The loss signal is not designed for use in automated control of the network in
environments where loss bits are set by untrusted hosts, Instead, the signal is
to be used for troubleshooting individual flows and for monitoring the network
by aggregating information from multiple flows and raising operator alarms if
aggregate statistics indicate a potential problem.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="conventions">
<section id="section-2">
      <h2 id="name-notational-conventions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
interpreted as described in <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="loss-bits">
<section id="section-3">
      <h2 id="name-loss-bits">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-loss-bits" class="section-name selfRef">Loss Bits</a>
      </h2>
<p id="section-3-1">The draft introduces two bits that are to be present in packets with a short
header.  Therefore, only loss of short header packets is reported using loss
bits.  Whenever this specification refers to packets, it is referring only to
packets with short headers.<a href="#section-3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3-2.1">Q: The "sQuare signal" bit is toggled every N outgoing packets, as explained
below in <a href="#squarebit" class="auto internal xref">Section 3.1</a>.<a href="#section-3-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-2.2">L: The "Loss event" bit is set to 0 or 1 according to the Unreported Loss
counter, as explained below in <a href="#lossbit" class="auto internal xref">Section 3.2</a>.<a href="#section-3-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-3-3">Each endpoint maintains appropriate counters independently and separately for
each connection 4-tuple and Destination Connection ID.  Whenever this
specification refers to connections, it is referring to packets sharing the same
4-tuple and Destination Connection ID.  A "QUIC connection", however, refers to
connections in the traditional QUIC sense.<a href="#section-3-3" class="pilcrow">¶</a></p>
<div id="squarebit">
<section id="section-3.1">
        <h3 id="name-setting-the-square-signal-b">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-setting-the-square-signal-b" class="section-name selfRef">Setting the sQuare Signal Bit on Outgoing Packets</a>
        </h3>
<p id="section-3.1-1">The sQuare Value is initialized to the Initial Q Value (0 or 1) and is reflected
in the Q bit of every outgoing packet. The sQuare value is inverted after
sending every N packets (a Q run). Hence, Q Period is 2*N. The Q bit represents
"packet color" as defined by <span>[<a href="#RFC8321" class="cite xref">RFC8321</a>]</span>.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Observation points can estimate upstream losses by counting the number of
packets during one period of the square signal, as described in <a href="#usage" class="auto internal xref">Section 4</a>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<div id="q-run-length-selection">
<section id="section-3.1.1">
          <h4 id="name-q-run-length-selection">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-q-run-length-selection" class="section-name selfRef">Q Run Length Selection</a>
          </h4>
<p id="section-3.1.1-1">The sender is expected to choose N (Q run length) based on the expected amount
of loss and reordering on the path.  The choice of N strikes a compromise -- the
observation could become too unreliable in case of packet reordering and/or
severe loss if N is too small, while short connections may not yield a useful
upstream loss measurement if N is too large (see <a href="#upstreamloss" class="auto internal xref">Section 4.2</a>).<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1.1-2">The value of N MUST be at least 64 and be a power of 2. This requirement allows
an Observer to infer the Q run length by observing one period of the square
signal. It also allows the Observer to identify flows that set the loss bits to
arbitrary values (see <a href="#ossification" class="auto internal xref">Section 6</a>).<a href="#section-3.1.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1.1-3">If the sender does not have sufficient information to make an informed decision
about Q run length, the sender SHOULD use N=64, since this value has been
extensively tried in large-scale field tests and yielded good results.
Alternatively, the sender MAY also choose a random N for each connection,
increasing the chances of using a Q run length that gives the best signal for
some connections.<a href="#section-3.1.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1.1-4">The sender MUST keep the value of N constant for a given connection.  The sender
can change the value of N during a QUIC connection by switching to a new
Destination Connection ID, if one is available.<a href="#section-3.1.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="lossbit">
<section id="section-3.2">
        <h3 id="name-setting-the-loss-event-bit-">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-setting-the-loss-event-bit-" class="section-name selfRef">Setting the Loss Event Bit on Outgoing Packets</a>
        </h3>
<p id="section-3.2-1">The Unreported Loss counter is initialized to 0, and the L bit of every outgoing
packet indicates whether the Unreported Loss counter is positive (L=1 if the
counter is positive, and L=0 otherwise).  The value of the Unreported Loss
counter is decremented every time a packet with L=1 is sent.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">The value of the Unreported Loss counter is incremented for every packet that
the protocol declares lost, using QUIC's existing loss detection machinery. If
the implementation is able to rescind the loss determination later, a positive
Unreported Loss counter MAY be decremented due to the rescission, but it SHOULD
NOT become negative.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">This loss signaling is similar to loss signaling in <span>[<a href="#RFC7713" class="cite xref">RFC7713</a>]</span>, except the
Loss Event bit is reporting the exact number of lost packets, whereas the Echo
Loss bit in <span>[<a href="#RFC7713" class="cite xref">RFC7713</a>]</span> is reporting an approximate number of lost bytes.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">Observation points can estimate the end-to-end loss, as determined by the
upstream endpoint, by counting packets in this direction with the L bit equal
to 1, as described in <a href="#usage" class="auto internal xref">Section 4</a>.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="usage">
<section id="section-4">
      <h2 id="name-using-loss-bits-for-passive">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-using-loss-bits-for-passive" class="section-name selfRef">Using Loss Bits for Passive Loss Measurement</a>
      </h2>
<div id="endtoendloss">
<section id="section-4.1">
        <h3 id="name-end-to-end-loss">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-end-to-end-loss" class="section-name selfRef">End-To-End Loss</a>
        </h3>
<p id="section-4.1-1">The Loss Event bit allows an observer to calculate the end-to-end loss rate by
counting packets with the L bit value of 0 and 1 for a given connection. The
end-to-end loss rate is the fraction of packets with L=1.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">The assumption here is that upstream loss affects packets with L=0 and L=1
equally.  If some loss is caused by tail-drop in a network device, this may
be a simplification.  If the sender congestion controller reduces the
packet send rate after loss, there may be a sufficient delay before sending
packets with L=1 that they have a greater chance of arriving at the observer.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upstreamloss">
<section id="section-4.2">
        <h3 id="name-upstream-loss">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-upstream-loss" class="section-name selfRef">Upstream Loss</a>
        </h3>
<p id="section-4.2-1">Blocks of N (Q run length) consecutive packets are sent with the same value of
the Q bit, followed by another block of N packets with an inverted value of the
Q bit. Hence, knowing the value of N, an on-path observer can estimate the
amount of loss after observing at least N packets. The upstream loss rate (<code>u</code>)
is one minus the average number of packets in a block of packets with the same Q
value (<code>p</code>) divided by N (<code>u=1-avg(p)/N</code>).<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">The observer needs to be able to tolerate packet reordering that can blur the
edges of the square signal.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">The observer needs to differentiate packets as belonging to different
connections, since they use independent counters.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="losscorrelation">
<section id="section-4.3">
        <h3 id="name-correlating-end-to-end-and-">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-correlating-end-to-end-and-" class="section-name selfRef">Correlating End-to-End and Upstream Loss</a>
        </h3>
<p id="section-4.3-1">Upstream loss is calculated by observing packets that did not suffer the
upstream loss.  End-to-end loss, however, is calculated by observing subsequent
packets after the sender's protocol detected the loss.  Hence, end-to-end loss
is generally observed with a delay of between 1 RTT (loss declared due to
multiple duplicate acknowledgments) and 1 RTO (loss declared due to a timeout)
relative to the upstream loss.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">The connection RTT can sometimes be estimated by timing protocol handshake
messages. This RTT estimate can be greatly improved by observing a dedicated
protocol mechanism for conveying RTT information, such as the Latency Spin bit
of <span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">Whenever the observer needs to perform a computation that uses both upstream and
end-to-end loss rate measurements, it SHOULD use upstream loss rate leading the
end-to-end loss rate by approximately 1 RTT. If the observer is unable to
estimate RTT of the connection, it should accumulate loss measurements over time
periods of at least 4 times the typical RTT for the observed connections.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">If the calculated upstream loss rate exceeds the end-to-end loss rate calculated
in <a href="#endtoendloss" class="auto internal xref">Section 4.1</a>, then either the Q run length is too short for the amount of
packet reordering or there is observer loss, described in <a href="#observerloss" class="auto internal xref">Section 4.5</a>. If
this happens, the observer SHOULD adjust the calculated upstream loss rate to
match end-to-end loss rate.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="downstreamloss">
<section id="section-4.4">
        <h3 id="name-downstream-loss">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-downstream-loss" class="section-name selfRef">Downstream Loss</a>
        </h3>
<p id="section-4.4-1">Because downstream loss affects only those packets that did not suffer upstream
loss, the end-to-end loss rate (<code>e</code>) relates to the upstream loss rate (<code>u</code>) and
downstream loss rate (<code>d</code>) as <code>(1-u)(1-d)=1-e</code>. Hence, <code>d=(e-u)/(1-u)</code>.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="observerloss">
<section id="section-4.5">
        <h3 id="name-observer-loss">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-observer-loss" class="section-name selfRef">Observer Loss</a>
        </h3>
<p id="section-4.5-1">A typical deployment of a passive observation system includes a network tap
device that mirrors network packets of interest to a device that performs
analysis and measurement on the mirrored packets. The observer loss is the loss
that occurs on the mirror path.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<p id="section-4.5-2">Observer loss affects upstream loss rate measurement, since it causes the
observer to account for fewer packets in a block of identical Q bit values (see
<a href="#upstreamloss" class="auto internal xref">Section 4.2</a>).  The end-to-end loss rate measurement, however, is unaffected
by the observer loss, since it is a measurement of the fraction of packets with
the set L bit value, and the observer loss would affect all packets equally (see
<a href="#endtoendloss" class="auto internal xref">Section 4.1</a>).<a href="#section-4.5-2" class="pilcrow">¶</a></p>
<p id="section-4.5-3">The need to adjust the upstream loss rate down to match end-to-end loss rate as
described in <a href="#losscorrelation" class="auto internal xref">Section 4.3</a> is a strong indication of the observer loss,
whose magnitude is between the amount of such adjustment and the entirety of the
upstream loss measured in <a href="#upstreamloss" class="auto internal xref">Section 4.2</a>. Alternatively, a high apparent
upstream loss rate could be an indication of significant reordering, possibly
due to packets belonging to a single connection being multiplexed over several
upstream paths with different latency characteristics.<a href="#section-4.5-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="quic-v1-implementation">
<section id="section-5">
      <h2 id="name-quic-v1-implementation">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-quic-v1-implementation" class="section-name selfRef">QUIC v1 Implementation</a>
      </h2>
<div id="tp">
<section id="section-5.1">
        <h3 id="name-transport-parameter">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-transport-parameter" class="section-name selfRef">Transport Parameter</a>
        </h3>
<p id="section-5.1-1">The use of the loss bits is negotiated using a transport parameter:<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.1-2">
          <dt id="section-5.1-2.1">loss_bits (0x1057):</dt>
          <dd style="margin-left: 1.5em" id="section-5.1-2.2">
            <p id="section-5.1-2.2.1">The loss bits transport parameter is an integer value, encoded as a
variable-length integer, that can be set to 0 or 1 indicating the level of
loss bits support.<a href="#section-5.1-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-5.1-3">When loss_bits parameter is present, the peer is allowed to use reserved bits in
the short packet header as loss bits if the peer sends loss_bits=1.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">When loss_bits is set to 1, the sender will use reserved bits as loss bits if
the peer includes the loss_bits transport parameter.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">A client MUST NOT use remembered value of loss_bits for 0-RTT connections.<a href="#section-5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="shortheader">
<section id="section-5.2">
        <h3 id="name-short-packet-header">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-short-packet-header" class="section-name selfRef">Short Packet Header</a>
        </h3>
<p id="section-5.2-1">When sending loss bits has been negotiated, the reserved (R) bits are replaced
by the loss (Q and L) bits in the short packet header (see Section 17.3 of
<span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>).<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-2">
<pre>
    0 1 2 3 4 5 6 7
   +-+-+-+-+-+-+-+-+
   |0|1|S|Q|L|K|P P|
   +-+-+-+-+-+-+-+-+
</pre><a href="#section-5.2-2" class="pilcrow">¶</a>
</div>
<span class="break"></span><dl class="dlParallel" id="section-5.2-3">
          <dt id="section-5.2-3.1">sQuare Signal Bit (Q):</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-3.2">
            <p id="section-5.2-3.2.1">The fourth most significant bit (0x10) is the sQuare signal bit, set as
described in <a href="#squarebit" class="auto internal xref">Section 3.1</a>.<a href="#section-5.2-3.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-3.3">Loss Event Bit (L):</dt>
          <dd style="margin-left: 1.5em" id="section-5.2-3.4">
            <p id="section-5.2-3.4.1">The fifth most significant bit (0x08) is the Loss event bit, set as
described in <a href="#lossbit" class="auto internal xref">Section 3.2</a>.<a href="#section-5.2-3.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="header-protection">
<section id="section-5.3">
        <h3 id="name-header-protection">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-header-protection" class="section-name selfRef">Header Protection</a>
        </h3>
<p id="section-5.3-1">Unlike the reserved (R) bits, the loss (Q and L) bits are not protected.  When
sending loss bits has been negotiated, the first byte of the header protection
mask used to protect short packet headers has its five most significant bits
masked out instead of three.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">The algorithm specified in Section 5.4.1 of <span>[<a href="#QUIC-TLS" class="cite xref">QUIC-TLS</a>]</span> changes as
follows:<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3-3">
<pre>
   else:
      # Short header: 3 bits masked
      packet[0] ^= mask[0] &amp; 0x07
</pre><a href="#section-5.3-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="ossification">
<section id="section-6">
      <h2 id="name-ossification-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-ossification-considerations" class="section-name selfRef">Ossification Considerations</a>
      </h2>
<p id="section-6-1">Accurate loss reporting signal is not critical for the operation QUIC protocol,
though its presence in a sufficient number of connections is important for the
operation of networks.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">The loss bits are amenable to "greasing" described in <span>[<a href="#RFC8701" class="cite xref">RFC8701</a>]</span> and MUST be
greased.  The greasing should be accomplished similarly to the Latency Spin bit
greasing in <span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.  Namely, implementations MUST NOT include
loss_bits transport parameter for a random selection of at least one in every 16
QUIC connections.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">It is possible to observe packet reordering near the edge of the square signal.
A middle box might observe the signal and try to fix packet reordering that it
can identify, though only a small fraction of reordering can be fixed using this
method.  Latency spin bit signal edge can be used for the same purpose.<a href="#section-6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">In the absence of packet loss, the Q bit signal does not provide any information
that cannot be observed by simply counting packets transiting a network
path. The L bit signal discloses internal state of the protocol's loss detection
machinery, but this state can often be gleamed by timing packets and observing
congestion controller response. Hence, loss bits do not provide a viable new
mechanism to attack QUIC data integrity and secrecy.<a href="#section-7-1" class="pilcrow">¶</a></p>
<div id="optimistic-ack-attack">
<section id="section-7.1">
        <h3 id="name-optimistic-ack-attack">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-optimistic-ack-attack" class="section-name selfRef">Optimistic ACK Attack</a>
        </h3>
<p id="section-7.1-1">A defense against an Optimistic ACK Attack <span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span> involves a
sender randomly skipping packet numbers to detect a receiver acknowledging
packet numbers that have never been received. The Q bit signal may inform the
attacker which packet numbers were skipped on purpose and which had
been actually lost (and are, therefore, safe for the attacker to
acknowledge). To use the Q bit for this purpose, the attacker must first
receive at least an entire Q run of packets, which renders the attack
ineffective against a delay-sensitive congestion controller.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">For QUIC v1 connections, if the attacker can make its peer transmit data using a
single large stream, examining offsets in STREAM frames can reveal whether
packet number skips are deliberate. In that case, the Q bit signal provides no
new information (but it does save the attacker the need to remove packet
protection). However, an endpoint that communicates using <span>[<a href="#DATAGRAM" class="cite xref">DATAGRAM</a>]</span> and uses
a loss-based congestion controller MAY shorten the current Q run by the number
of skipped packets. For example, skipping a single packet number will invert the
sQuare signal one outgoing packet sooner.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="privacy-considerations">
<section id="section-8">
      <h2 id="name-privacy-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-8-1">To minimize unintentional exposure of information, loss bits provide an explicit
loss signal -- a preferred way to share information per <span>[<a href="#RFC8558" class="cite xref">RFC8558</a>]</span>.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2"><span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span> allows changing connection IDs in the middle of a QUIC
connection to reduce the likelihood of a passive observer linking old and new
subflows to the same device. Hence, a QUIC implementation would need to reset
all counters when it changes connection ID used for outgoing packets.  It would
also need to avoid incrementing Unreported Loss counter for loss of packets sent
with a different connection ID.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Accurate loss information allows identification and correlation of network
conditions upstream and downstream of the observer. This could be a powerful
tool to identify connections that attempt to hide their origin networks, if the
adversary is able to affect network conditions in those origin networks.
Similar information can be obtained by packet timing and inferring congestion
controller response to network events, but loss information provides a clearer
signal.<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">Implementations MUST allow administrators of clients and servers to disable loss
reporting either globally or per QUIC connection.  Additionally, as described in
<a href="#ossification" class="auto internal xref">Section 6</a>, loss reporting MUST be disabled for a certain fraction of all
QUIC connections.<a href="#section-8-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">This document registers a new value in the QUIC Transport Parameter Registry:<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">Value: 0x1057 (if this document is approved)<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Parameter Name: loss_bits<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">Specification: Indicates that the endpoint supports loss bits. An endpoint that
   advertises this transport parameter can receive loss bits. An endpoint that
   advertises this transport parameter with value 1 can also send loss bits.<a href="#section-9-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="change-log">
<section id="section-10">
      <h2 id="name-change-log">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<div id="since-version-02">
<section id="section-10.1">
        <h3 id="name-since-version-02">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-since-version-02" class="section-name selfRef">Since version 02</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.1-1.1">Add QUIC v1 negotiation using transport parameter, use short header reserved
bits as loss bits, header protection change, IANA Considerations<a href="#section-10.1-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-1.2">Add Optimistic ACK Attack Defense to Security Considerations<a href="#section-10.1-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-1.3">Expand Privacy Considerations<a href="#section-10.1-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-10.1-1.4">Clarify Q run length selection<a href="#section-10.1-1.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-version-01">
<section id="section-10.2">
        <h3 id="name-since-version-01">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-since-version-01" class="section-name selfRef">Since version 01</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.2-1.1">Add reference to RFC7713<a href="#section-10.2-1.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-version-00">
<section id="section-10.3">
        <h3 id="name-since-version-00">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-since-version-00" class="section-name selfRef">Since version 00</a>
        </h3>
<ul class="normal">
<li class="normal" id="section-10.3-1.1">Rewrote to base this draft on <span>[<a href="#LOSSBITS" class="cite xref">LOSSBITS</a>]</span><a href="#section-10.3-1.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="acknowledgments">
<section id="section-11">
      <h2 id="name-acknowledgments">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-11-1">The sQuare signal bit was originally specified by Kazuho Oku in early proposals
for loss measurement and is an instance of the "alternate marking" as defined in
<span>[<a href="#RFC8321" class="cite xref">RFC8321</a>]</span>.<a href="#section-11-1" class="pilcrow">¶</a></p>
<p id="section-11-2">Many thanks to Christian Huitema for pointing out the interaction of Q bit and
Optimistic ACK Attack defence.<a href="#section-11-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="EXPLICIT-MEASUREMENTS">[EXPLICIT-MEASUREMENTS]</dt>
        <dd>
<span class="refAuthor">Cociglio, M.</span>, <span class="refAuthor">Ferrieux, A.</span>, <span class="refAuthor">Fioccola, G.</span>, <span class="refAuthor">Lubashev, I.</span>, <span class="refAuthor">Bulgarella, F.</span>, <span class="refAuthor">Nilo, M.</span>, <span class="refAuthor">Hamchaoui, I.</span>, and <span class="refAuthor">R. Sisto</span>, <span class="refTitle">"Explicit Host-to-Network Flow Measurements Techniques"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-ippm-explicit-flow-measurements-07</span>, <time datetime="2023-07-10" class="refDate">10 July 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-ippm-explicit-flow-measurements-07">https://datatracker.ietf.org/doc/html/draft-ietf-ippm-explicit-flow-measurements-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-TLS">[QUIC-TLS]</dt>
        <dd>
<span class="refAuthor">Thomson, M., Ed.</span> and <span class="refAuthor">S. Turner, Ed.</span>, <span class="refTitle">"Using TLS to Secure QUIC"</span>, <span class="seriesInfo">RFC 9001</span>, <span class="seriesInfo">DOI 10.17487/RFC9001</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9001">https://www.rfc-editor.org/rfc/rfc9001</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-TRANSPORT">[QUIC-TRANSPORT]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9000">https://www.rfc-editor.org/rfc/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8558">[RFC8558]</dt>
        <dd>
<span class="refAuthor">Hardie, T., Ed.</span>, <span class="refTitle">"Transport Protocol Path Signals"</span>, <span class="seriesInfo">RFC 8558</span>, <span class="seriesInfo">DOI 10.17487/RFC8558</span>, <time datetime="2019-04" class="refDate">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8558">https://www.rfc-editor.org/rfc/rfc8558</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8701">[RFC8701]</dt>
        <dd>
<span class="refAuthor">Benjamin, D.</span>, <span class="refTitle">"Applying Generate Random Extensions And Sustain Extensibility (GREASE) to TLS Extensibility"</span>, <span class="seriesInfo">RFC 8701</span>, <span class="seriesInfo">DOI 10.17487/RFC8701</span>, <time datetime="2020-01" class="refDate">January 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8701">https://www.rfc-editor.org/rfc/rfc8701</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9065">[RFC9065]</dt>
      <dd>
<span class="refAuthor">Fairhurst, G.</span> and <span class="refAuthor">C. Perkins</span>, <span class="refTitle">"Considerations around Transport Header Confidentiality, Network Operations, and the Evolution of Internet Transport Protocols"</span>, <span class="seriesInfo">RFC 9065</span>, <span class="seriesInfo">DOI 10.17487/RFC9065</span>, <time datetime="2021-07" class="refDate">July 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9065">https://www.rfc-editor.org/rfc/rfc9065</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="DATAGRAM">[DATAGRAM]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span>, <span class="refAuthor">Kinnear, E.</span>, and <span class="refAuthor">D. Schinazi</span>, <span class="refTitle">"An Unreliable Datagram Extension to QUIC"</span>, <span class="seriesInfo">RFC 9221</span>, <span class="seriesInfo">DOI 10.17487/RFC9221</span>, <time datetime="2022-03" class="refDate">March 2022</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9221">https://www.rfc-editor.org/rfc/rfc9221</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="LOSSBITS">[LOSSBITS]</dt>
        <dd>
<span class="refAuthor">Ferrieux, A.</span>, <span class="refAuthor">Hamchaoui, I.</span>, <span class="refAuthor">Lubashev, I.</span>, and <span class="refAuthor">D. Tikhonov</span>, <span class="refTitle">"Packet Loss Signaling for Encrypted Protocols"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ferrieuxhamchaoui-tsvwg-lossbits-03</span>, <time datetime="2020-07-28" class="refDate">28 July 2020</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ferrieuxhamchaoui-tsvwg-lossbits-03">https://datatracker.ietf.org/doc/html/draft-ferrieuxhamchaoui-tsvwg-lossbits-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7713">[RFC7713]</dt>
        <dd>
<span class="refAuthor">Mathis, M.</span> and <span class="refAuthor">B. Briscoe</span>, <span class="refTitle">"Congestion Exposure (ConEx) Concepts, Abstract Mechanism, and Requirements"</span>, <span class="seriesInfo">RFC 7713</span>, <span class="seriesInfo">DOI 10.17487/RFC7713</span>, <time datetime="2015-12" class="refDate">December 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7713">https://www.rfc-editor.org/rfc/rfc7713</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8321">[RFC8321]</dt>
      <dd>
<span class="refAuthor">Fioccola, G., Ed.</span>, <span class="refAuthor">Capello, A.</span>, <span class="refAuthor">Cociglio, M.</span>, <span class="refAuthor">Castaldelli, L.</span>, <span class="refAuthor">Chen, M.</span>, <span class="refAuthor">Zheng, L.</span>, <span class="refAuthor">Mirsky, G.</span>, and <span class="refAuthor">T. Mizrahi</span>, <span class="refTitle">"Alternate-Marking Method for Passive and Hybrid Performance Monitoring"</span>, <span class="seriesInfo">RFC 8321</span>, <span class="seriesInfo">DOI 10.17487/RFC8321</span>, <time datetime="2018-01" class="refDate">January 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8321">https://www.rfc-editor.org/rfc/rfc8321</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Alexandre Ferrieux (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Orange Labs</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:alexandre.ferrieux@orange.com" class="email">alexandre.ferrieux@orange.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Igor Lubashev (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Akamai Technologies</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ilubashe@akamai.com" class="email">ilubashe@akamai.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Giuseppe Fioccola (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Huawei Technologies</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:giuseppe.fioccola@huawei.com" class="email">giuseppe.fioccola@huawei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
